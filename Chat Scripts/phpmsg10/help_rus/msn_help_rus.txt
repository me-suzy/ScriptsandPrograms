/***********************************************************************
*                                                                      *
*                                                                      *
*                                                                      *
*                          PHP MESSENGER 1.0                           *
*                                                                      *
*               PHP áèáëèîòåêà äëÿ îáìåíà ñîîáùåíèÿìè !                *
*                                                                      *
*                                                                      *
*                                                                      *
*                PHP MESSENGER ïîääåðæèâàåò ïðèåì/îòïðàâêó             *
*                              ñîîáùåíèé                               *
*                                "ICQ",                                *
*                      "AOL Instatnt Messenger",                       *
*                     "Windows Instant Messenger",                     *
*                                                                      *
*                à òàê æå ìîæåò îòñûëàòü SMS èñïîëüçóþ ICQ !!!         *
*                                                                      *
*                                                                      *
*                                                                      *
*               PHP MESSENGER ïðîäóêò shareware, è äîëæåí áûòü         *
*               çàðåãèñòðèðîâàí ïîñëå 30 äíåâíîãî èñïîëüçîâàíèÿ!       *
*                                                                      *
*                                                                      *
* 	       	Çàðåãèñòðèðóéòå PHP MESSENGER ñåãîäíÿ !                *
* 	       	http://www.php-messenger.com/ru/register.php           *
*                                                                      *
*                                                                      *
* 	       	Òåõïîääåðæêà äëÿ çàðåãåñòðèðîâàííûõ ïîëüçîâàòåëåé:     *
* 	       	http://www.php-messenger.com/ru/support.php            *
*                                                                      *
*                                                                      *
* 	       	Áåñïëàòíûé àïãðåéä äî âñåõ âåðñèé 1.xx                 *
* 	       	http://www.php-messenger.com/ru/upgrade.php            *
*                                                                      *
*                                                                      *
*                                                                      *
*                                                                      *
*                                                                      *
*               Òðåáîâàíèÿ:                                            *
*                                                                      *
*               1) '--enable-sockets'                                  *
*                                                                      *
*               2) Äëÿ "Windows Instant Messenger"                     *
*                  '--with-openssl' è '--with-iconv'                   *
*                                                                      *
*               3) Îòñûëêà SMS íà ðóññêîì ÿçûêå, òàêæå, òðåáóåò        *
*                  '--with-iconv'.                                     *
*                                                                      *
*                  Ìîæíî ñêà÷àòü "PHP conv"                            *
*                  http://www.php-messenger.com/files/php_conv.zip     *
*                  äëÿ çàìåíû iconv.                                   *
*                                                                      *
*                                                                      *
*                                                                      *
*           Copyright(c) 2004 http://www.php-messenger.com             *
*                                                                      *
***********************************************************************/



require "php_messenger.php" - ïîäêëþ÷åíèå PHP Messenger


$pm=new PM_MSN() - Ñîçäàíèå MSN îáúåêòà


$pm->Login($email,$password) - Âûïîëíèòü ïîäêëþ÷åíèå ê ñåðâåðó

	$email    - email ïîëüçîâàòåëÿ
	$password - ïàðîëü
	
	Â ñëó÷àå óñïåøíîãî ïîäêëþ÷åíèÿ ôóíêöèÿ âîçâðàùàåò TRUE â ïðîòèâíîì ñëó÷àå FALSE
	


$pm->Send_Message($email,$message_text) - Îòñûëêà ñîîáùåíèÿ

	$email        - email ïîëó÷àòåëÿ
	$message_text - Òåêñò ñîîáùåíèÿ
	
	Â ñëó÷àå óñïåøíîé îòïðàâêè ñîîáùåíèÿ âîçâðàùàåò TRUE â ïðîòèâíîì ñëó÷àå FALSE,
	
	Ïîñëå îòñûëêè ñîîáùåíèÿ îñòàåòñÿ îòêðûòàÿ ñåññèÿ ñ ïîëüçîâàòåëåì
	íà ñëó÷àé, åñëè íåîáõîäèìî äîæäàòüñÿ îò íåãî îòâåòà èëè åùå îòîñëàòü
	åìó ñîîáùåíèå, ñëåäóþùèå ñîîáùåíèÿ áóäóò îòñûëàòüñÿ áûñòðåå.

 	Åñëè íå ïëàíèðóåòñÿ áîëüøå îòñûëàòü ýòîìó ïîëüçîâàòåëþ ñîîáùåíèé, òî íåîáõîäèìî
 	îòêëþ÷èòü ïîëüçîâàòåëÿ êîìàíäîé User_Off_Line


$pm->User_Off_Line($email) - Îòêëþ÷àåò ïîäêëþ÷åííîãî ïîëüçîâàòåëÿ,
        ñïèñîê ïîäêëþ÷åííûõ ïîëüçîâàòåëåé ìîæíî ñ÷èòàòü â àññîöèàòèâíîì ìàññèâå $pm->users,
        ãäå â êà÷åñòâå êëþ÷åé èñïîëüçóåòñÿ åìåéëû, ñòðóêòóðà ìàññèâà:
        
        $pm->users[$email]['nick'] - íèê ïîëüçîâàòåëÿ
        $pm->users[$email]['type'] - 'in'/'out'
           'out' - ïîëüçîâàòåëü ïîäêëþ÷åí â ðåçóëüòàòå îñòûëêè åìó ñîîáùåíèÿ
           'in'  - ïîëüçîâàòåëü ñàì èíèöèèðîâàë ïîäêëþ÷åíèå


$pm->Send_Message_Confirm($email,$message_text) - èäåíòè÷íî Send_Message

	
$incoming_message=$pm->Read_Message($wait_time) - ÷òåíèå âõîäÿùåãî ñîîáùåíèÿ	
	
	$wait_time - âðåìÿ îæèäàíèÿ ñîîáùåíèÿ â ñåêóíäàõ, ìîæíî èñïîëüçîâàòü äðîáíûå ÷èñëà (1.5=ïîëòîðû ñåêóíäû)
	             åñëè $wait_time==-1, òî ôóíöèÿ áóäåò æäàòü íåîãðàíè÷åíî äîëãî.
	             
	Åñëè ñîîáùåíèå ïîëó÷åíî, òî ôóíêöèÿ ôîçâðàùàåò àññîöèàòèâíûé ìàññèâ ñëåäóþùåé ñòðóêòóðû:

		$incoming_message['UIN'] - email îïðàâèòåëÿ
		$incoming_message['message_text'] - òåêñò ñîîáùåíèÿ

	Åñëè ñîîáùåíèå íå ïîëó÷åíî, òî ôóíööèÿ âîçâðàùàåò FALSE	
		
		
$pm->Off_Line() - îòêëþ÷åíèå îò ñåðâåðà

		